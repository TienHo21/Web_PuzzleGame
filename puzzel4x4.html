<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="puzzel.css">
</head>
<style>
*{
   
    margin: 0 auto;
 }    
.btn{
    height: 90px;
    width: 100px;
    font-size: 35px;
    font-weight: bold;
    border :200px ;
    border-radius: 3px;
}
.board{
    display: flex;
    flex-wrap: wrap;
    height: 360px;
    width: 400px;
}
.button{
    margin: 0 auto;
    background-color: pink;
    border-radius: 5px;
   
}
</style>
<body>
    <audio id="myPlayer" src="Justin-Bieber-Peaches-Ft-Daniel-Caesar-Giveon-(TrendyBeatz.com).mp3"></audio>
    <div class="container">
        <header></header>
        <nav>
          <marquee behavior="" direction=""> <H4>Ch√†o m·ª´ng c√°c b·∫°n ƒë·∫øn v·ªõi game PUZZEL ƒë∆∞·ª£c x√¢y d·ª±ng b·ªüi TI·∫æN H·ªí üòÑüòÑ</H4> </marquee>
        </nav>
        
        <left>
          <img src="../asm2/banerdoc.jpg" width="250" height="400" alt="">   
        </left>


        <article align="center">
            <div class="board">
        
                <button onclick="move(0,0)" id="b00"  class="btn">1</button>
                <button onclick="move(0,1)" id="b01"  class="btn">2</button>
                <button onclick="move(0,2)" id="b02"  class="btn">3</button>
                <button onclick="move(0,3)" id="b03"  class="btn">4</button>
                
                <br>
        
                <button onclick="move(1,0)" id="b10"  class="btn">5</button>
                <button onclick="move(1,1)" id="b11"  class="btn">6</button>
                <button onclick="move(1,2)" id="b12"  class="btn">7</button>
                <button onclick="move(1,3)" id="b13"  class="btn">8</button>
                
                <br>
        
                <button onclick="move(2,0)" id="b20"  class="btn">10</button>
                <button onclick="move(2,1)" id="b21"  class="btn">11</button>
                <button onclick="move(2,2)" id="b22"  class="btn">12</button>
                <button onclick="move(2,3)" id="b23"  class="btn">13</button>
               
        
                <button onclick="move(3,0)" id="b30"  class="btn">15</button>
                <button onclick="move(3,1)" id="b31"  class="btn">16</button>
                <button onclick="move(3,2)" id="b32"  class="btn">17</button>
                <button onclick="move(3,3)" id="b33"  class="btn">18</button>
                
        
                <br>
                
            </div>
            <br>
            <button class="button" onclick="randMove()">X√°o tr·ªôn</button>
            <button class="button" onclick="thele()">Th·ªÉ l·ªá</button>
            <button class="button">
                <a href="puzzel3x3.html">Back level</a>
            </button>
            <button class="button" onclick="doiMau()">Color</button>
            <button class="button" id="nutBatTat" onclick="BatTat();">Nhac</button>
            <button class="button" id="upto5" hidden> 
                <a href="puzel5x5.html">Next level</a>
            </button>

        </article>
        <aside>
            
                <iframe width="250" height="198" src="https://www.youtube.com/embed/WJIN4-1a8A4" title="YouTube video player" 
                frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

                <iframe width="250" height="198" src="https://www.youtube.com/embed/VrBq3q65NW8" title="YouTube video player" 
                frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
            
        </aside>
        <footer>
           <h5>Tr∆∞·ªùng Cao ƒê·∫≥ng FPT Polytechnic</h5> 
           <h6>C∆° S·ªü ƒê√† N·∫µng: 137 Nguy·ªÖn Th·ªã Th·∫≠p, H√≤a Minh, Li√™n Chi·ªÉu, ƒê√† N·∫µng</h6>
        </footer>
       </div>
       <script>
         //khai b√°o c√°c bi·∫øn
         const data=[
            ["1","2","3","4"],
            ["5","6","7","8"],
            ["9","10","11","12"],
            ["13","14","15"," "],

        ];

        const ketQua=[
            ["1","2","3","4"],
            ["5","6","7","8"],
            ["9","10","11","12"],
            ["13","14","15"," "],

        ];


        const b = [
            [document.getElementById("b00"),document.getElementById("b01"),document.getElementById("b02"),document.getElementById("b03") ],
            [document.getElementById("b10"),document.getElementById("b11"),document.getElementById("b12"),document.getElementById("b13") ],
            [document.getElementById("b20"),document.getElementById("b21"),document.getElementById("b22"),document.getElementById("b23") ],
            [document.getElementById("b30"),document.getElementById("b31"),document.getElementById("b32"),document.getElementById("b33") ],

        ]

        const bangMau=["#55efc4","#ffeaa7","#00b894","pink","#dfe6e9","#2d3436"];
        let mau=0;

        let myPlayer = document.getElementById("myPlayer");
            let SoundON = true;

            function BatTat(){
                let nuBatTat = document.getElementById("nutBatTat");
                if(SoundON){
                    SoundON = false;
                    myPlayer.play();
                    nuBatTat.innerHTML="ƒëang b·∫≠t"

                }else{
                    SoundON= true;
                    myPlayer.pause();
                    nuBatTat.innerHTML = "ƒëang t·∫Øt"

                }
            }    


        function doiMau(){
            if(mau<bangMau.length - 2)mau++;
            else mau=0;
            veMauNen();

        }

        
        function randInt(n){
            return Math.floor(Math.random()*n)

        }
        //di chuy·ªÉn √¥ tr·ªëng ng·∫´u nhi√™n
        function randMove(){
            //s·∫Øp x·∫øp s·ªë theo ƒë√∫ng th·ª© t·ª±
            for(let i=0;i<4;i++){
                for(let j=0;j<4;j++){
                    data[i][j]=ketQua[i][j];
                }
            }
            let u=3,v=3;
            let soLan=0
            do{
                switch (randInt(4)){
                    case 0://d·ªùi sang tr√°i
                        if(namTrong(u,v-1)){
                            data[u][v]= data[u][v-1];
                            data[u][v-1]=" ";
                            v=v-1;
                        }
                    break;

                    case 1://d·ªùi l√™n tr√™n
                        if(namTrong(u-1,v)){
                            data[u][v]=data[u-1][v];
                            data[u-1][v]=" ";
                            u=u-1;
                        }
                    break;

                    case 2://d·ªùi sang ph·∫£i
                        if(namTrong(u,v+1)){
                            data[u][v]=data[u][v+1];
                            data[u][v+1]=" ";
                            v=v+1;
                        }
                    break;

                    case 3://d·ªùi xu·ªëng d∆∞·ªõi
                    if(namTrong(u+1,v)){
                            data[u][v]=data[u+1][v];
                            data[u+1][v]=" ";
                            u=u+1;
                        }
                    break;
                }
                soLan++;

            }while(soLan<15);

            veSo();
        }

        //ki·ªÉm tra chi·∫øn th·∫Øng
        function checkWin(){
            let dem=0;
            for(let i=0 ; i<4;i++){
                for(let j=0;j<4;j++){
                    if(data[i][j]==ketQua[i][j]) dem++;
                }
            }
            if(dem==16) return true;
            else return false;
        }


        //[i][j] n·∫±m trong b√†n c·ªù
        function namTrong(i,j){
            if(i>=0 && i < 4 && j>=0 && j<4) return(true);
            else return false;
        }

        //di chuy·ªÉn qu√¢n c·ªù
        function move(i,j){
            //d·ªùi sang ph·∫£i
           if(namTrong(i, j + 1) && data[i][j + 1]==" "){
            data[i][j + 1]=data[i][j];
            data[i][j]=" ";
            //d·ªùi sang tr√°i
           }else if(namTrong(i, j - 1) && data[i][j - 1] ==" "){
            data[i][j - 1]=data[i][j];
            data[i][j]=" ";
           }else if(namTrong(i + 1, j) && data[i+1][j] ==" "){
            data[i+1][j]=data[i][j];
            data[i][j]=" ";
           }else if(namTrong(i -1, j) && data[i-1][j] ==" "){
            data[i-1][j]=data[i][j];
            data[i][j]=" ";
           }
           /* data[2][0]=data[0][2];
            data[0][2]="7";*/


            veSo();
            if(checkWin()==true){alert("Ch√∫c m·ª´ng b·∫°n ƒë√£ th·∫Øng");
            }
            document.getElementById("upto5").hidden=false;
        }


        function veSo(){
            for (let i = 0; i< 4; i++ ){
                for (let j = 0; j < 4; j++ ){
                    b[i][j].textContent = data[i][j];
                }
            }

        }
        //khai b√°o c√°c h√†ng
        function veMauNen (){
            for (let i = 0; i< 4; i++ ){
                for (let j = 0; j < 4; j++ ){
                    if ((i+j)%2==0) b[i][j].style.background = bangMau[mau]
                    else  b[i][j].style.background = bangMau[mau+1]
                }
            }
        }
        
        
        
        function thele(){
            alert ("H√£y nh·∫•n v√†o c√°c √¥ b√™n c·∫°nh c√≥ √¥ tr·ªëng ƒë·ªÉ di chuy·ªÉn con s·ªë, nh·∫•n n√∫t X√°o tr·ªôn ƒë·ªÉ x√°o tr·ªôn game, nh·∫•n n√∫t ƒê·ªïi m√†u ƒë·ªÉ ƒë·ªïi m√†u cho game v√† n√∫t Next/Back level ƒë·ªÉ ti·∫øn t·ªõi m√†n m·ªõi ho·∫∑c l√πi m√†n ch∆°i. Ch√∫c b·∫°n ch∆°i vui v·∫ª")

        }

        // ph·∫ßn main
        veMauNen();
        veSo();
        randMove();
        
       </script>
</body>
</html>